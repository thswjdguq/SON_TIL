// 🎯 Dart Lotto Number Generator
// ------------------------------------------------------------
// Author  : Jung
// Date    : 2025-11-01
// Version : 1.0
//
// 📘 프로그램 개요
// Dart 언어의 기본 문법과 컬렉션 자료구조(List, Set)를 활용하여
// 중복 없는 6자리 로또 번호를 자동으로 생성하는 콘솔 애플리케이션입니다.
// 
// 사용자에게 생성할 세트 개수를 입력받은 후, 
// 각 세트마다 랜덤한 번호 6개를 뽑아 오름차순으로 정렬하여 출력합니다.
//
// 📚 주요 학습 포인트
// 1️⃣ Set을 이용한 중복 제거
// 2️⃣ List 변환 및 정렬(sort)
// 3️⃣ Random() 클래스를 이용한 난수 생성
// 4️⃣ stdin / stdout을 통한 콘솔 입출력
// 5️⃣ 함수 분리를 통한 구조적 코드 설계
// ------------------------------------------------------------

import 'dart:io';
import 'dart:math';

/// 프로그램 시작점 (main 함수)
void main() {
  print("🎰 Dart Lotto Number Generator 🎰");
  
  // 사용자로부터 몇 세트의 로또 번호를 생성할지 입력받음
  stdout.write("몇 세트의 로또 번호를 생성할까요? (예: 3) → ");
  
  // 입력값을 정수로 변환 (예외 발생 방지를 위해 tryParse 사용)
  var input = stdin.readLineSync();
  var count = int.tryParse(input ?? '1') ?? 1;

  print("\n📦 로또 번호 생성 결과\n------------------------");
  
  // 입력받은 개수만큼 로또 번호를 생성 및 출력
  for (var i = 1; i <= count; i++) {
    print("[$i회차] ${generateLotto()}");
  }

  print("------------------------");
  print("✅ 총 ${count}세트 생성 완료!");
}

/// ✅ 로또 번호 한 세트를 생성하는 함수
/// - 1부터 45까지의 숫자 중 중복 없이 6개를 무작위로 추출
/// - 오름차순으로 정렬 후 문자열 형태로 반환
String generateLotto() {
  var lotto = <int>{};          // 중복을 허용하지 않는 Set 컬렉션
  var random = Random();        // 난수 생성기 객체

  // Set의 길이가 6이 될 때까지 반복 (중복 자동 제거)
  while (lotto.length < 6) {
    lotto.add(random.nextInt(45) + 1); // 0~44 → 1~45로 조정
  }

  // Set → List로 변환 후 정렬
  var result = lotto.toList()..sort();

  // 번호들을 쉼표로 구분된 문자열로 변환하여 반환
  return result.join(', ');
}
